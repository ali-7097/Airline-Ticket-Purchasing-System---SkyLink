<div class="user-details">
    <div class="row mb-3">
        <div class="col-md-6">
            <h6>User Information</h6>
            <p><strong>Name:</strong> {{ user.name }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Role:</strong> 
                <span class="badge bg-{{ 'primary' if user.role == 'admin' else 'secondary' }}">
                    {{ user.role|title }}
                </span>
            </p>
        </div>
        <div class="col-md-6">
            <h6>Booking Statistics</h6>
            <p><strong>Total Bookings:</strong> {{ booking_details|length }}</p>
            <p><strong>Total Spent:</strong> ${{ "%.2f"|format(booking_details|sum(attribute='reservation.total_price')) }}</p>
        </div>
    </div>

    {% if booking_details %}
    <h6>Flight History</h6>
    <div class="table-responsive">
        <table class="table table-sm">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Flight</th>
                    <th>Route</th>
                    <th>Passenger</th>
                    <th>Seat</th>
                    <th>Status</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody>
                {% for booking in booking_details %}
                <tr>
                    <td>{{ booking.reservation.reservation_date.strftime('%Y-%m-%d') }}</td>
                    <td>{{ booking.flight.flight_template.flight_number }}</td>
                    <td>
                        {{ booking.flight.flight_template.departure_airport.IATA_code }} â†’ 
                        {{ booking.flight.flight_template.arrival_airport.IATA_code }}
                    </td>
                    <td>{{ booking.passenger.first_name }} {{ booking.passenger.last_name }}</td>
                    <td>{{ booking.seat.seat_number }}</td>
                    <td>
                        <span class="badge bg-{{ 'success' if booking.reservation.status.value == 'Confirmed' else 'warning' if booking.reservation.status.value == 'Refunded' else 'danger' }}">
                            {{ booking.reservation.status.value }}
                        </span>
                    </td>
                    <td>${{ "%.2f"|format(booking.reservation.total_price) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="text-center py-3">
        <p class="text-muted">No booking history found for this user.</p>
    </div>
    {% endif %}
</div>

<style>
.user-details {
    padding: 0;
}

.user-details h6 {
    color: #333;
    font-weight: 600;
    margin-bottom: 10px;
}

.user-details p {
    margin-bottom: 5px;
    color: #666;
}

.table {
    margin-top: 15px;
}

.table th {
    font-weight: 600;
    color: #555;
    font-size: 0.875rem;
}

.table td {
    font-size: 0.875rem;
}

.badge {
    font-size: 0.75rem;
}
</style> 